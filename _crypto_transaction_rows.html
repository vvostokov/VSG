{% for tx in transactions %}
{% set badge_map = {
    'buy': 'badge-success',
    'sell': 'badge-danger',
    'deposit': 'badge-info',
    'withdrawal': 'badge-warning',
    'transfer': 'badge-secondary'
} %}
<tr class="transaction-row"
    data-type="{{ tx.type }}"
    data-pair="{{ tx.asset1_ticker }}/{{ tx.asset2_ticker or '' }}"
    data-asset1-amount="{{ tx.asset1_amount|trim_zeros if tx.asset1_amount is not none else '0' }}"
    data-asset2-amount="{{ tx.asset2_amount|trim_zeros if tx.asset2_amount is not none else '0' }}"
    data-asset1-ticker="{{ tx.asset1_ticker }}"
    data-asset2-ticker="{{ tx.asset2_ticker or '' }}">
    <td><input type="checkbox" class="tx-selector" name="transaction_ids" value="{{ tx.id }}"></td>
    <td>{{ tx.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
    <td><a href="{{ url_for('main.ui_investment_platform_detail', platform_id=tx.platform.id) }}">{{ tx.platform.name }}</a></td>
    <td class="text-center">
        <span class="badge badge-pill {{ badge_map.get(tx.type, 'badge-light') }}">{{ tx.type|capitalize }}</span>
        {# На мобильных устройствах показываем только основную информацию #}
        <div class="d-md-none">
            <strong>{{ tx.asset1_ticker }}</strong>: {{ "%.8f"|format(tx.asset1_amount)|trim_zeros if tx.asset1_amount is not none else '-' }}
        </div>
        {% if tx.raw_type and tx.raw_type|lower != tx.type|lower %}
        <small class="text-muted d-none d-md-block">({{ tx.raw_type }})</small>
        {% endif %}
    </td>
    <td class="d-none d-md-table-cell">{{ tx.asset1_ticker }}</td>
    <td class="text-end text-monospace">{{ "%.8f"|format(tx.asset1_amount)|trim_zeros if tx.asset1_amount is not none else '-' }}</td>
    <td class="d-none d-md-table-cell">{{ tx.asset2_ticker or '-' }}</td>
    <td class="text-end text-monospace d-none d-lg-table-cell">{{ "%.8f"|format(tx.asset2_amount)|trim_zeros if tx.asset2_amount is not none else '-' }}</td>
    <td class="text-end text-monospace d-none d-md-table-cell">{{ "%.8f"|format(tx.execution_price)|trim_zeros if tx.execution_price is not none else '-' }}</td>
    <td class="text-monospace d-none d-lg-table-cell">{{ (tx.fee_amount|trim_zeros ~ ' ' ~ tx.fee_currency) if tx.fee_amount and tx.fee_amount > 0 and tx.fee_currency else '-' }}</td>
</tr>
{% endfor %}